// syntax highlighting and formatting available via the Prisma VSCode extension

generator client {
  provider = "prisma-client-js"
  output = "../node_modules/.prisma/client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model AppUser {
  email          String @unique @db.VarChar(255)
  notes          Note[]
  google_user_id String @unique @db.VarChar(255)

  id         Int      @id @default(autoincrement())
  created_at DateTime @default(now()) @db.Timestamptz(6)
  updated_at DateTime @updatedAt @db.Timestamptz(6)

  // translate from pg to prisma naming conventions.
  // 'user' is a reserved keyword in postgres.
  @@map("app_user")
}

model Note {
  title     String  @db.VarChar(255)
  content   String  @default("")
  published Boolean @default(false)
  user_id   Int
  user      AppUser @relation(fields: [user_id], references: [id])
  tags      Tag[]

  id         Int      @id @default(autoincrement())
  created_at DateTime @default(now()) @db.Timestamptz(6)
  updated_at DateTime @updatedAt @db.Timestamptz(6)

  @@map("note")
}

model Tag {
  name  String @db.VarChar(255)
  notes Note[]

  id         Int      @id @default(autoincrement())
  created_at DateTime @default(now()) @db.Timestamptz(6)
  updated_at DateTime @updatedAt @db.Timestamptz(6)

  @@map("tag")
}
